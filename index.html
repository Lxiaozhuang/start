<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>图片缩放</title>
    <style>
         .viewerimg {
           width: 100%;
           height: auto;
       }
    </style>
</head>
<body>
<div class="page" style="display:block">
    <div class="pinch-zoom">
        <img id="imgView" class="viewerimg" draggable="true" src="https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=2185511559,1796435134&fm=26&gp=0.jpg">
    </div>
</div>
<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
<script>
  var target = document.getElementById("imgView");
   target.style.webkitTransition = 'all ease 0.05s';

   touch.on('#imgView', 'touchstart', function (ev) {
       ev.preventDefault();
   });    var initialScale = -10;    var currentScale;    var dx, dy;
   touch.on('#imgView', 'pinchend', function (ev) {        if ($("#imgView").hasClass('viewerimg')) {
           $("#imgView").removeClass("viewerimg");
       };
       currentScale = ev.scale - 1;
       currentScale = initialScale + currentScale;
       currentScale = currentScale > 2 ? 2 : currentScale;
       currentScale = currentScale < 1 ? 1 : currentScale;        if (currentScale == 1) {
           $("#imgView").addClass("viewerimg");
       };        this.style.webkitTransform = 'scale(' + currentScale + ')';
       console.log("当前缩放比例为:" + currentScale + ".");
       
   });

   touch.on('#imgView', 'pinchend', function (ev) {
       initialScale = currentScale;
      
   });

   touch.on('#imgView', 'drag', function (ev) {
       dx = dx || 0;
       dy = dy || 0;        this.style.webkitTransform = 'scale(' + currentScale + ')';
       console.log("当前x值为:" + dx + ", 当前y值为:" + dy + ".");        var offx = dx + ev.x + "px";        var offy = dy + ev.y + "px";        this.style.webkitTransform = "translate3d(" + offx + "," + offy + ",0)";
   });

   touch.on('#imgView', 'dragend', function (ev) {
       dx += ev.x;
       dy += ev.y;
   });
</script>
<!-- <script type="text/javascript">
    $(function () {
        $('div.pinch-zoom').each(function () {
            new RTP.PinchZoom($(this), {});
        });
    })
</script> -->
</body>
</html>
